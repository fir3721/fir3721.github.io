<html>
  <head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>讲点区块链 | 山雨亭</title>
<link rel="shortcut icon" href="http://fir3721.github.io//favicon.ico?v=1572576003159">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="http://fir3721.github.io//styles/main.css">

<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>



  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="http://fir3721.github.io/">
  <img class="avatar" src="http://fir3721.github.io//images/avatar.png?v=1572576003159" alt="">
  </a>
  <h1 class="site-title">
    山雨亭
  </h1>
  <p class="site-description">
    温故而知新
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          首页
        </a>
      
    
      
        <a href="/archives" class="menu">
          归档
        </a>
      
    
      
        <a href="/tags" class="menu">
          标签
        </a>
      
    
      
        <a href="/post/about" class="menu">
          关于
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>


        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              讲点区块链
            </h2>
            <div class="post-info">
              <time class="post-time">
                · 2019-11-01 ·
              </time>
              
            </div>
            
            <div class="post-content">
              <p>最近主席一番话，让区块链一下全面火热起来。</p>
<p>相比于前几次区块链在技术层面上“基于理念的过高预期——基于现实应用稀缺的过低评判——基于应用落地回归正常热度”的技术循环曲线所带来的一波波热潮和低谷，这一次的热度覆盖范围更广：至少政府部门的朋友们就很着急——搞不懂区块链，不说几句区块链，学习强国分怎么上得去？</p>
<p>在这一波热潮里，找我提问、讨论区块链（说是讨论，更多是我向大佬们学习）的都不少，发现说清楚区块链还真不是一件容易的事情。</p>
<p>写这篇文章，是希望讲点《真·小白》可以理解的区块链，争取不写成网上一大片的《白痴·区块链》伪科普文。</p>
<h2 id="先说段子">先说段子</h2>
<p>随着区块链，有个段子在朋友圈热起来：</p>
<img src="https://raw.githubusercontent.com/fir3721/picgoo/master/img/WeChat5a7c866a01a6e8d11d3dc063af81f951.png"/>
<p>其实这个段子不是最近出来的，早在上一波区块链热潮的时候就流行过一波，被一众“区块链大佬”狠狠抨击了一顿。</p>
<p>毕竟站在“大佬”的角度，区块链这么神圣的东西，怎么能被一个段子搞得像很廉价的样子？</p>
<p>但是，对于普罗大众来说，世界在发展，很多新鲜的事务，我们并不需要去研究它，搞清楚它的很多细节，我们需要的是理解，对它有基本的、正确的认知。</p>
<p>毕竟术业有专攻，人的精力也是有限的，没必要也不太可能把所有人拉到一个水平线上讨论任何问题。</p>
<p>对于技术圈的人来说，“蚂蚁能搬动比自身重很多的物体，是因为ATP的作用”这个事情容易理解，但是又有多少人能搞清楚ATP对肌肉的作用机制呢？</p>
<p>因此，本文还是会用“麻将”这个例子来讲一讲区块链。</p>
<h2 id="区块链的定义">区块链的定义！？</h2>
<p>我们先来看看关于区块链最常见的定义：<mark>一种去中心化的分布式公开的账本数据库，数据不可篡改</mark>。</p>
<p>这个看似简单的定义，其实还有蛮多问题没有讲清楚：</p>
<ul>
<li>为什么能去中心化？</li>
<li>为什么要去中心化？</li>
<li>分布式就不能控制和篡改结果了吗？</li>
<li>为什么是账本？不能做别的事情吗？</li>
<li>数据库有什么稀奇？多做备份不也可以保障数据安全和防篡改吗？</li>
</ul>
<p>我们在理解一件事情时，基于熟悉的事去延伸，相比凭空去想象，要来的简单。</p>
<p>只是给出一个定义，虽然已经是很简洁清晰，但是理解起来并不容易。</p>
<h2 id="区块链到底是什么">区块链到底是什么！！</h2>
<p>这个时候，我们就需要拿出前面麻将的例子，再结合区块链的定义，来看定义里说的都是什么意思。</p>
<ul>
<li>去中心化：打麻将的时候，大家确认的麻将规则（打上海麻将还是四川麻将，能不能碰让不让吃），以及牌局过程中谁输谁赢的记录，不是某个人说了算，而是每个人（节点）都有权利参与确认——这就是去中心化：没有一个权威的中心节点；</li>
<li>分布式：打麻将的时候，你接个电话一下分散注意力大脑宕机（或者是故意的），忘记了前面牌局的输赢记录，放心，你一个节点的崩溃，不会影响大局，另外三个人（节点）给你记得清清楚楚——这就是分布式：数据在每个节点都有一个备份；</li>
<li>不可篡改：麻将规则和输赢记录，一经确认，某个人（单个节点）就不能耍赖说不认。你不认，另外一边三个人会把你踢出局——这就是数据不可篡改：公布的数据不容易篡改；</li>
<li>51%攻击：前面说不容易篡改，那是因为想改也有办法。如果对方三个人一起反悔，那你也没办法，要么认怂要么离桌。在区块链的世界里，也是如此，少数服从多数，只要有51%的节点认同，那么它就是对的——这就是51%攻击，谁掌握了超过半数的话语权，谁就拥有了控制权。</li>
</ul>
<p>前面只是说了麻将和区块链相似的一些地方，但是没有说明白为什么要用区块链来解决问题，用区块链有什么好处。</p>
<p>接下来，我们要把段子延伸一下，让问题更复杂一些。</p>
<p>因为区块链本身要解决的，不是一桌四个人的事，人家是要拯救世界集结全人类智慧对抗喵星侵略势力……（对不起，我说漏嘴了）——总之，区块链是一项底层技术，要解决的问题非常宏大，所以简单的一桌麻将这个例子，不足以说明问题。</p>
<blockquote>
<p>现在打麻将不能一桌一桌四个人打了，要全场子一起打，大家要记住全场每一桌的打法规则，以及每一桌每一局的输赢记录。</p>
<p>然后所有人可以随意流动换桌，哪里有空位就打哪桌。</p>
<p>打完一局也不在这一桌单独结算，而是全场子统一记账，离开场子的时候再给你算输赢。</p>
<p>（开这样一个麻将馆，想想就大气！）</p>
</blockquote>
<p>这个时候，我们会遇到这么一些问题：</p>
<ul>
<li>
<p>怎么解决信任问题？</p>
<p>这么多人一起玩，每桌有每桌的打法，还要记住每个人每桌每局的输赢，怎么办？有这么一些做法：</p>
<ul class="contains-task-list">
<li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox" id="task-item-9763436"> 中心化做法：<br>
<label class="task-list-item-label" for="task-item-9763436"> 中心化做法：
场子老板说了算，他负责派人记录所有的规则和输赢，谁不守规矩，那就“来人呀，拖出去……”（扫黑打恶的，不能继续了）</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-2866379"> 分布式：<br>
<label class="task-list-item-label" for="task-item-2866379"> 分布式：
每次规则确定以及有了输赢结果，都在场子里大喊一声，然后所有人都拿个小本本记下来。有人不守规矩，大家集体翻出小本本来看谁对谁错。（效率很低，难度很大对不对？都搞不清大家是来打麻将还是记账来了……别急，这个问题后面会解决。）</label></li>
</ul>
<p>毫无疑问，我们可以看出区别：如果<strong>分布式</strong>方案能够实现（大家记账都又快又准），谁也不愿意用<strong>中心化</strong>的方案，对不对？</p>
<p>在中心化场景下，就算这个场子的老板非常厚道且聪明，从不记错帐，但也难保他不会在被几杆铅笔顶着后腰的情况下说“来人呀，把这个没错的家伙拖出去……”</p>
<blockquote>
<p>在这里，分布式的做法，就是前面一桌四人的简单例子里做法的延续，只是在这个复杂情景下，更容易体现<mark>区块链分布式决策的价值</mark>。</p>
</blockquote>
</li>
<li>
<p>怎么解决集体出老千（51%攻击）问题？</p>
<p>基于前面讲的基于分布式的信任机制，其实也有问题。</p>
<p>比如这个场子里一直麻将打得好好的，哪天来了一群喵星人（人很多，超过场子里一半），觉得麻将牌更适合用来搭积木，然后集体改了他们的小本本，那么抱歉，大家只能抓瞎，要么离场要么一起搭积木。<strong>这就是前面讲的51%攻击</strong></p>
<p>那么要怎么办呢？也有两种做法（当然还有其他，但是本文讲区块链，就不展开了）：</p>
<ul>
<li>场子搞大点，人越多，就越难满足51%的攻击条件。（人越多，要记住的规则和输赢就越多，前面那个效率和难度问题继续放大）</li>
<li>搞加盟制度，要进来玩，得经过认证，比如说句上海话听听先，这样保障了一个场子里大家是信得过的关系。（这就是私有链/联盟链，区块链的一种。前面允许随便进的叫公有链。）</li>
</ul>
<p>这一次，这两种方法都是可以有效抵御51%攻击</p>
<blockquote>
<p>说到这个防篡改问题，就可以看出，区块链适合解决那些需要群体决策的场景，只有在这些场景下，我们才能体会<mark>区块链防数据篡改的价值</mark>。比如全世界的球迷投票（覆盖范围足够广的公有链）、一个团体的内部投票（私有/联盟链）等。</p>
<p>很多区块链例子里讲的家庭记账，本身没有这种互不信任的情况，很难让大家有切身的体会。</p>
</blockquote>
</li>
</ul>
<p>到这里，我们可以来看看区块链到底是什么了。</p>
<blockquote>
<p><mark>区块链，就是一种机制，一种记录信息的方式</mark>，本质上就是运行在计算机上的一个数据库技术。（把打麻将的人换成计算机，那么我们前面遇到的记账这个难度很大效率很低的事情就没那么难解决了）</p>
<p><mark>它采用分布式方式，保障运行的某种规则、以及规则运行的每一个记录，在各个节点之中都是公开透明且全量的，不依赖于一个中心来判定规则的有效与无效。</mark></p>
</blockquote>
<p>前面我们提出的几个问题，现在应该都有答案了：</p>
<ul>
<li>怎么实现去中心化？——分布式，每个节点都是中心，集体决策。</li>
<li>为什么要去中心化？——有一些问题，要通过一个中心节点来解决，要付出非常昂贵的成本来保障其可信。去中心化是一个更好的解决方案。</li>
<li>分布式就不能控制和篡改结果了吗？——可以，但是很难，尤其是随着区块链发展，底层算力覆盖越广越强大的情况下。（想象一下，全世界的人都一起打麻将的情况下，想要让大家一起搭积木，除非是请灭霸来定向干掉全世界一半支持打麻将的人，然后你还要得到超过全世界四分之一的人支持你才行。）</li>
<li>为什么是账本？不能做别的事情吗？——交易和账本只是一个最容易想象到的应用。实际上，在计算机的世界里，一切都是数据。一切行为，都是数据变动的记录，记录即账本。因此区块链可以用来干任何现在在计算机里做的事情，只是要考虑区块链是否是解决该问题最合适的方案。（比如高铁技术很先进，但是出行三公里，还是共享自行车更适合。）</li>
<li>数据库有什么稀奇？多做备份不也可以保障数据安全和防篡改吗？——在数据正确的情况下，多做备份，分发到不同的节点保存，是可以保障数据安全，防止数据篡改。但是这没有解决单一中心节点的可信问题。</li>
</ul>
<h2 id="那还不快用区块链">那还不快用区块链？！</h2>
<p>目前使用区块链的成功应用并不多见，是因为区块链作为一门新技术，还有一些问题需要优化。</p>
<ul>
<li>
<p>最典型的是处理效率低的问题</p>
<p>前面的麻将馆案例里，即便我们把打牌的人换成了计算机，但是还是会发现，这个牌局打到后面，估计相比真人打也快不了多少。</p>
<p>原因在于，随着参与的计算机节点变多（比特币持币钱包数量约为 2783 万个），每一个节点的行为都要公布和记录，这里面存在了太多冗余信息，计算机处理起来也快不到哪去。</p>
</li>
<li>
<p>其次是隐私问题</p>
<p>区块链为了保证去中心化，信息都是公开发布，这也会带来隐私风险。可以想象区块链应用落地的时候，很难允许比特币这种匿名的情况。在实名情况下，你做的任何事情全网都知道，这也是没法大规模商用的。</p>
<p>因此，需要对数据进行加密，既保证可用又不会泄露隐私。</p>
</li>
<li>
<p>此外还有公链、联盟链、私链的融合</p>
<p>公链是允许任何人加入的自由网络，联盟链是需要认证节点通过才可加入的受限网络，私有链是完全被控的网络。</p>
<p>还是拿麻将馆来举例子。</p>
<ul>
<li>
<p>麻将馆为了保护用户隐私，每个人进场的时候，基于指纹/虹膜/DNA(怎么安全怎么来)，发一个带唯一编号的狐狸面具。这样大家在场子里玩起来就放心多了，再也不用担心三舅也在场子里看到你赢了不少晚上到你家找你借钱了。你的输赢记录都挂在面具编号，最终关联在这个编号对应的你的基因编号上。</p>
</li>
<li>
<p>然后这条街上又开了类似模式的扑克馆、桌游馆……各家馆子为了方便用户消费，决定把各自的账本打通。这样在麻将馆赚了钱，不用取出来再搬到桌游馆去 <s>输掉</s> 使用这么麻烦了，你只要带着指纹/虹膜/DNA去就行了。</p>
</li>
<li>
<p>各家馆子在每天关门和自己的用户同步完最后一笔账之后，派一个代表，带着账本到一个仓库里，大家一起开始大叫：“基因编号3618，上期余额1000，麻将馆今日盈亏+9000”、“基因编号3618，上期余额1000，桌游馆今日盈亏+8000”、“基因编号3618，上期余额300……”。“诶诶，你这记错了，不是300……”</p>
</li>
</ul>
<p>这个例子，就属于私有链（各家馆子内部）和联盟链（各家馆子之间）融合的例子，这里面要解决信息分层、脱敏、唯一认证等等一系列问题。</p>
</li>
</ul>
<p>在这些问题得到解决之前，区块链很难得到大规模应用。现在区块链还处于技术普及和不断优化的阶段，所以参与者大多是技术圈的大佬。</p>
<h2 id="最后举个靠谱的例子">最后举个靠谱的例子</h2>
<p>说了这么多区块链，未来区块链会用在哪些场景呢？</p>
<p>我个人思考这么久，想到的一个合适区块链发挥价值的场景是小区管理。</p>
<p>目前小区管理是个比较麻烦的事情，经常可以看到各种矛盾，有的还挺严重。</p>
<p>这里面当然有业主组织者的能力、态度等方面的因素，也有区域物业公司管理是否规范的因素。</p>
<p>先不考虑这些因素，单说小区业主治理模式的特征，还是挺能和区块链结合的：</p>
<ul>
<li>群体决策机制：小区业主们，即便选了业委会，也是不信任的人多，总觉得他们在贪墨……这很适合通过区块链，让每个业主独立决策；</li>
<li>业主行为公开：小区业主的决策行为、缴纳物业费行为等，都可以在小区范围内公示……使用区块链也不用担心隐私问题（当然关联的是几栋几号而不是姓名之类）；</li>
<li>智能合约规则：群体决策通过的规则，自动执行，以保障物业管理可以顺利进行……区块链本身就非常适合执行此类规则，比如业主发起的门禁系统改造，群体决策通过之后，自动从业委会账户转款至物业公司代为执行。</li>
</ul>
<p>希望有一天，能看到成熟的区块链应用落地。</p>

            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">下一篇</div>
            <a href="http://fir3721.github.io//post/hello-gridea">
              <h3 class="post-title">
                Hello Gridea
              </h3>
            </a>
          </div>
        

        

        <div class="site-footer">
   | 
  <a class="rss" href="http://fir3721.github.io//atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

      </div>
    </div>
  </body>
</html>
